<html>
<head>
<meta charset="UTF-8">
    <script>
        let d = new Date();
     //   alert("Today's date is " + d);


var root = 'mfe-pps:///';
var pages = [
        {'page':'breach', 'targets': [{'os':'default', 'redir':root+'identityBreach'} ]},
        {'page':'addDevice', 'targets': [{'os':'Win10', 'redir':'https://download.mcafee.com/molbin/iss-loc/ppsinstaller/redir.html'}, {'os':'Win10S', 'redir':'https://www.microsoft.com/en-us/p/mcafee-personal-security/9n1sqw2nkpds'}, {'os':'Android','redir':'https://play.google.com/store/apps/details?id=com.truekey.android'}, {'os':'iOS', 'redir':'https://apps.apple.com/us/app/true-key-by-mcafee/id932579221'}, {'os':'default', 'redir':'https://www.mcafee.com/'} ]}
    ];
var pageMap = new Map();

function make_page_map()
{
    for (let p of pages) {
        let targetMap = new Map();
        for (let t of p.targets) {
            targetMap.set(t.os, t.redir);
        }
        pageMap.set(p.page, targetMap);
    }
}

function get_page(page, os) {
    let p = pageMap.get(page);
    let t;
    if (!p) {
        return null;
    }
    t = p.get(os);
    if (!t) {
        t = p.get('default');
        if (!t) {
            return null;
        }
    }

    return t;
}


var queryParams = new URL(window.location.href).searchParams;

function get_param(key) {
	return (queryParams ? queryParams.get(key) : null);
}

function redirect(redir) {
    window.location.replace(redir);
    return true;
}

function detect(regex) {
    return !!navigator.platform && regex.test(navigator.platform);
}


function testRegex(regex) {
	return !!navigator.platform && regex.test(navigator.platform);
}


function on_ios(redir) {
///iPad|iPhone|iPod/

	 

	  if (navigator.userAgent.match(/iPhone/i)  
                || navigator.userAgent.match(/iPad/i)  
                || navigator.userAgent.match(/iPod/i)) {
	  	alert("detected ios");
        return redirect(redir);

	  }
    // if (detect(/iPad|iPhone|iPod/)) {
    // 	alert("detected ios");
    //     return redirect(redir);
    // }
    alert("not iosssss")

    return false;
}
function is_ios() {


	  if (navigator.userAgent.match(/iPhone/i)  
                || navigator.userAgent.match(/iPad/i)  
                || navigator.userAgent.match(/iPod/i)) {
	  	alert("detected iosssss");
	      window.location.replace("mfe-pps:///tesingwithsomedata");

        return true;

	  }
    // if (detect(/iPad|iPhone|iPod/)) {
    // 	alert("detected ios");
    //     return redirect(redir);
    // }
    alert("not iosssss")

    return false;
}
function on_other(redir) {
    return redirect(redir);
}

function on_load() {
     //   alert("done ");
    let p = get_param('t');
    // if (!p) {
    // 	    alert("return1")

    //     return;
    // }

    // if (testRegex(/iPad|iPhone|iPod/)) {
    // 	alert("regex detected");
    // }
    // else {
    // 	alert("regex not detected");
    // }

    if (is_ios()) 
    {
    	alert("detected");
    }
    else {
    	alert("not detected");
    }

    // make_page_map();
    // if (on_ios(get_page(p, "iOS"))) return true;
    // return on_other(get_page(p, "default"));
}





    </script>
    	<script type="application/javascript">window.addEventListener("load", on_load);</script>

</head>
<body>
testinggggggdoneright1
</body>
</html>